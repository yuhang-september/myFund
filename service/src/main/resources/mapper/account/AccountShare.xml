<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.yuhang.service.mapper.account.AccountShareMapper">

    <resultMap id="AccountShare" type="com.yuhang.service.entity.account.AccountShare">
        <id column="share_id" property="shareId" javaType="String" jdbcType="CHAR"/>
        <result column="account_id" property="accountId" javaType="String" jdbcType="CHAR"/>
        <result column="fund_code" property="fundCode" javaType="String" jdbcType="CHAR"/>
        <result column="share" property="share" javaType="Double" jdbcType="DECIMAL"/>
        <result column="payment_channel" property="paymentChannel" javaType="String" jdbcType="CHAR"/>
        <result column="create_time" property="createTime" javaType="Date" jdbcType="TIMESTAMP"/>
        <result column="last_update_time" property="lastUpdateTime" javaType="Date" jdbcType="TIMESTAMP"/>
    </resultMap>

    <sql id="allColumns">
        share_id,
        account_id,
        fund_code,
        share,
        payment_channel,
        create_time,
        last_update_time
    </sql>

    <insert id="insert" parameterType="com.yuhang.service.entity.account.AccountShare">
        insert into ac_share (<include refid="allColumns"/>) value (
        #{share.shareId},#{share.accountId},#{share.fundCode},#{share.share},#{share.paymentChannel},
        #{share.createTime},#{share.lastUpdateTime}
        )
    </insert>

    <update id="update">
        update ac_share
        set share            = #{share.share},
            last_update_time = #{share.lastUpdateTime}
        where share_id = #{share.shareId}
    </update>

    <select id="select" resultMap="AccountShare">
        select <include refid="allColumns"/> from ac_share where account_id = #{tradeAccountId} and fund_code = #{fundCode} and payment_channel = #{paymentChannel}
    </select>
</mapper>